!function(){var e={87757:function(e,t,r){e.exports=r(68937)},68937:function(e){var t=function(e){"use strict";var t,r=Object.prototype,n=r.hasOwnProperty,o="function"===typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",d=o.toStringTag||"@@toStringTag";function s(e,t,r,n){var o=t&&t.prototype instanceof b?t:b,i=Object.create(o.prototype),a=new k(n||[]);return i._invoke=function(e,t,r){var n=c;return function(o,i){if(n===l)throw new Error("Generator is already running");if(n===f){if("throw"===o)throw i;return O()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var d=A(a,r);if(d){if(d===p)continue;return d}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===c)throw n=f,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=l;var s=u(e,t,r);if("normal"===s.type){if(n=r.done?f:w,s.arg===p)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n=f,r.method="throw",r.arg=s.arg)}}}(e,r,a),i}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}e.wrap=s;var c="suspendedStart",w="suspendedYield",l="executing",f="completed",p={};function b(){}function h(){}function m(){}var y={};y[i]=function(){return this};var v=Object.getPrototypeOf,g=v&&v(v(q([])));g&&g!==r&&n.call(g,i)&&(y=g);var S=m.prototype=b.prototype=Object.create(y);function W(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function M(e,t){function r(o,i,a,d){var s=u(e[o],e,i);if("throw"!==s.type){var c=s.arg,w=c.value;return w&&"object"===typeof w&&n.call(w,"__await")?t.resolve(w.__await).then((function(e){r("next",e,a,d)}),(function(e){r("throw",e,a,d)})):t.resolve(w).then((function(e){c.value=e,a(c)}),(function(e){return r("throw",e,a,d)}))}d(s.arg)}var o;this._invoke=function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}}function A(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,A(e,r),"throw"===r.method))return p;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var o=u(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,p;var i=o.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,p):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function q(e){if(e){var r=e[i];if(r)return r.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}return{next:O}}function O(){return{value:t,done:!0}}return h.prototype=S.constructor=m,m.constructor=h,m[d]=h.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,d in e||(e[d]="GeneratorFunction")),e.prototype=Object.create(S),e},e.awrap=function(e){return{__await:e}},W(M.prototype),M.prototype[a]=function(){return this},e.AsyncIterator=M,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new M(s(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},W(S),S[d]="Generator",S[i]=function(){return this},S.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=q,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(x),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return d.type="throw",d.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],d=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:q(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),p}},e}(e.exports);try{regeneratorRuntime=t}catch(r){Function("r","regeneratorRuntime = r")(t)}}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function t(t,r){if(t){if("string"===typeof t)return e(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?e(t,r):void 0}}function n(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,d=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(s){d=!0,o=s}finally{try{a||null==r.return||r.return()}finally{if(d)throw o}}return i}}(e,r)||t(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t,r,n,o,i,a){try{var d=e[i](a),s=d.value}catch(u){return void r(u)}d.done?t(s):Promise.resolve(s).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var a=e.apply(t,r);function d(e){o(a,n,i,d,s,"next",e)}function s(e){o(a,n,i,d,s,"throw",e)}d(void 0)}))}}function a(e,r){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=t(e))||r&&e&&"number"===typeof e.length){n&&(e=n);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,d=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return d=e.done,e},e:function(e){s=!0,a=e},f:function(){try{d||null==n.return||n.return()}finally{if(s)throw a}}}}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function w(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){return f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},f(e,t)}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function y(e,t){if(t&&("object"===m(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function v(e){var t=h();return function(){var r,n=b(e);if(t){var o=b(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return y(this,r)}}function g(e,t,r){return g=h()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&f(o,r.prototype),o},g.apply(null,arguments)}function S(e){var t="function"===typeof Map?new Map:void 0;return S=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return g(e,arguments,b(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),f(n,e)},S(e)}var W,M=r(87757),A=r.n(M),C="new-message",x="send-message",k="send-message-with-number-validation",q="update-active-chat",O="export-contacts",P="export-contacts-progress";var N,U=window.Debug.VERSION;function E(e){return R.apply(this,arguments)}function R(){return(R=i(A().mark((function e(t){var r,n,o;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={directPath:t.directPath,encFilehash:t.encFilehash,filehash:t.filehash,mediaKey:t.mediaKey,mediaKeyTimestamp:t.mediaKeyTimestamp,type:t.type,signal:(new AbortController).signal},e.prev=1,e.next=4,window.Store.DownloadManager.downloadAndMaybeDecrypt(r);case 4:return n=e.sent,e.next=7,window.WWebJS.arrayBufferToBase64Async(n);case 7:return o=e.sent,e.abrupt("return",{data:o,mimetype:t.mimetype,filename:t.filename,filesize:t.size});case 11:if(e.prev=11,e.t0=e.catch(1),!e.t0.status||404!==e.t0.status){e.next=15;break}return e.abrupt("return",void 0);case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}function T(e){return J.apply(this,arguments)}function J(){return(J=i(A().mark((function e(t){var r,n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.endsWith("@c.us")||(t+="@c.us"),r=window.Store.WidFactory.createWid(t),e.next=4,window.Store.QueryExist(r);case 4:if((n=e.sent)&&void 0!==n.wid){e.next=7;break}return e.abrupt("return",null);case 7:return e.abrupt("return",n.wid);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e){var t=new Blob([e],{type:"text/csv"}),r=window.URL.createObjectURL(t),n=document.createElement("a");n.setAttribute("href",r),n.setAttribute("download","contatos.csv"),n.click()}function L(e){return e&&e.startsWith("55")?12===e.length?e.replace(/(\d{2})(\d{2})(\d{8})/,"$29$3"):13===e.length?e.slice(2):null:null}function j(){return I.apply(this,arguments)}function I(){return(I=i(A().mark((function e(){var t,r,n,o,i,d,s,u,c,w,l,f,p,b,h,m;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=["Nome","Telefone","Data da \xfaltima mensagem","Contato salvo"].join(t=";"),e.prev=2,e.next=5,window.WWebJS.getChats();case 5:if(n=e.sent,o=n.length,i=0,d=[r],o){e.next=11;break}return e.abrupt("return");case 11:s=0,u=a(n),e.prev=13,u.s();case 15:if((c=u.n()).done){e.next=34;break}if(f=c.value,i++,(p=parseInt(i/o*100))>s&&(window.postMessage({type:P,data:{progress:p}}),s=p),!(f.isGroup||f.isReadOnly||!f.id.user||f.id.user.length<10)){e.next=22;break}return e.abrupt("continue",32);case 22:return b=f.id._serialized,e.next=25,window.WWebJS.getContact(b);case 25:if(!(h=e.sent).isEnterprise&&!h.isMe){e.next=28;break}return e.abrupt("continue",32);case 28:if((m={name:h.verifiedName||h.pushname||h.name,phoneNumber:L(f.id.user),isMyContact:h.isMyContact,lastMessage:null!==(w=f.lastMessage)&&void 0!==w&&w.t?new Date(1e3*(null===(l=f.lastMessage)||void 0===l?void 0:l.t)).toISOString():null}).phoneNumber){e.next=31;break}return e.abrupt("continue",32);case 31:d.push([m.name,m.phoneNumber,m.lastMessage,m.isMyContact?"SIM":"N\xc3O"].join(t));case 32:e.next=15;break;case 34:e.next=39;break;case 36:e.prev=36,e.t0=e.catch(13),u.e(e.t0);case 39:return e.prev=39,u.f(),e.finish(39);case 42:B(d.join("\n")),window.postMessage({type:P,data:{done:!0}}),e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),window.postMessage({type:P,data:{error:!0}});case 50:case"end":return e.stop()}}),e,null,[[2,47],[13,36,39,42]])})))).apply(this,arguments)}parseInt(null===(W=U.split("."))||void 0===W?void 0:W[1])>=3e3?(window.compareWwebVersions=function(e,t,r){if(![">",">=","<","<=","="].includes(t))throw new(function(e){p(r,e);var t=v(r);function r(e){var n;return l(this,r),(n=t.call(this,e)).name="CompareWwebVersionsError",n}return w(r)}(S(Error)))("Invalid comparison operator is provided");if("string"!==typeof e||"string"!==typeof r)throw new(function(e){p(r,e);var t=v(r);function r(e){var n;return l(this,r),(n=t.call(this,e)).name="CompareWwebVersionsError",n}return w(r)}(S(Error)))("A non-string WWeb version type is provided");for(e=e.replace(/-beta$/,""),r=r.replace(/-beta$/,"");e.length!==r.length;)e.length>r.length?r=r.concat("0"):e=e.concat("0");return e=Number(e.replace(/\./g,"")),r=Number(r.replace(/\./g,"")),">"===t?e>r:">="===t?e>=r:"<"===t?e<r:"<="===t?e<=r:"="===t&&e===r},window.Store=Object.assign({},window.require("WAWebCollections")),window.Store.AppState=window.require("WAWebSocketModel").Socket,window.Store.BlockContact=window.require("WAWebBlockContactAction"),window.Store.Conn=window.require("WAWebConnModel").Conn,window.Store.Cmd=window.require("WAWebCmd").Cmd,window.Store.DownloadManager=window.require("WAWebDownloadManager").downloadManager,window.Store.GroupQueryAndUpdate=window.require("WAWebGroupQueryJob").queryAndUpdateGroupMetadataById,window.Store.MediaPrep=window.require("WAWebPrepRawMedia"),window.Store.MediaObject=window.require("WAWebMediaStorage"),window.Store.MediaTypes=window.require("WAWebMmsMediaTypes"),window.Store.MediaUpload=window.require("WAWebMediaMmsV4Upload"),window.Store.MediaUpdate=window.require("WAWebMediaUpdateMsg"),window.Store.MsgKey=window.require("WAWebMsgKey"),window.Store.OpaqueData=window.require("WAWebMediaOpaqueData"),window.Store.QueryProduct=window.require("WAWebBizProductCatalogBridge"),window.Store.QueryOrder=window.require("WAWebBizOrderBridge"),window.Store.SendClear=window.require("WAWebChatClearBridge"),window.Store.SendDelete=window.require("WAWebDeleteChatAction"),window.Store.SendMessage=window.require("WAWebSendMsgChatAction"),window.Store.EditMessage=window.require("WAWebSendMessageEditAction"),window.Store.MediaDataUtils=window.require("WAWebMediaDataUtils"),window.Store.BlobCache=window.require("WAWebMediaInMemoryBlobCache"),window.Store.SendSeen=window.require("WAWebUpdateUnreadChatAction"),window.Store.User=window.require("WAWebUserPrefsMeUser"),window.Store.ContactMethods=u(u({},window.require("WAWebContactGetters")),window.require("WAWebFrontendContactGetters")),window.Store.UserConstructor=window.require("WAWebWid"),window.Store.Validators=window.require("WALinkify"),window.Store.WidFactory=window.require("WAWebWidFactory"),window.Store.ProfilePic=window.require("WAWebContactProfilePicThumbBridge"),window.Store.PresenceUtils=window.require("WAWebPresenceChatAction"),window.Store.ChatState=window.require("WAWebChatStateBridge"),window.Store.findCommonGroups=window.require("WAWebFindCommonGroupsContactAction").findCommonGroups,window.Store.ConversationMsgs=window.require("WAWebChatLoadMessages"),window.Store.sendReactionToMsg=window.require("WAWebSendReactionMsgAction").sendReactionToMsg,window.Store.createOrUpdateReactionsModule=window.require("WAWebDBCreateOrUpdateReactions"),window.Store.EphemeralFields=window.require("WAWebGetEphemeralFieldsMsgActionsUtils"),window.Store.MsgActionChecks=window.require("WAWebMsgActionCapability"),window.Store.QuotedMsg=window.require("WAWebQuotedMsgModelUtils"),window.Store.LinkPreview=window.require("WAWebLinkPreviewChatAction"),window.Store.Socket=window.require("WADeprecatedSendIq"),window.Store.SocketWap=window.require("WAWap"),window.Store.SearchContext=window.require("WAWebChatMessageSearch"),window.Store.DrawerManager=window.require("WAWebDrawerManager").DrawerManager,window.Store.LidUtils=window.require("WAWebApiContact"),window.Store.WidToJid=window.require("WAWebWidToJid"),window.Store.JidToWid=window.require("WAWebJidToWid"),window.Store.getMsgInfo=window.require("WAWebApiMessageInfoStore").queryMsgInfo,window.Store.QueryExist=window.require("WAWebQueryExistsJob").queryWidExists,window.Store.ReplyUtils=window.require("WAWebMsgReply"),window.Store.BotSecret=window.require("WAWebBotMessageSecret"),window.Store.BotProfiles=window.require("WAWebBotProfileCollection"),window.Store.ContactCollection=window.require("WAWebContactCollection").ContactCollection,window.Store.DeviceList=window.require("WAWebApiDeviceList"),window.Store.HistorySync=window.require("WAWebSendNonMessageDataRequest"),window.Store.AddonReactionTable=window.require("WAWebAddonReactionTableMode").reactionTableMode,window.Store.AddonPollVoteTable=window.require("WAWebAddonPollVoteTableMode").pollVoteTableMode,window.Store.ChatGetters=window.require("WAWebChatGetters"),window.Store.UploadUtils=window.require("WAWebUploadManager"),window.Store.WAWebStreamModel=window.require("WAWebStreamModel"),window.Store.FindOrCreateChat=window.require("WAWebFindChatAction"),window.Store.CustomerNoteUtils=window.require("WAWebNoteAction"),window.Store.BusinessGatingUtils=window.require("WAWebBizGatingUtils"),window.Store.PollsVotesSchema=window.require("WAWebPollsVotesSchema"),window.Store.PollsSendVote=window.require("WAWebPollsSendVoteMsgAction"),window.Store.Settings=u(u({},window.require("WAWebUserPrefsGeneral")),window.require("WAWebUserPrefsNotifications")),window.Store.NumberInfo=u(u({},window.require("WAPhoneUtils")),window.require("WAPhoneFindCC")),window.Store.ForwardUtils=u({},window.require("WAWebChatForwardMessage")),window.Store.PinnedMsgUtils=u(u({},window.require("WAWebPinInChatSchema")),window.require("WAWebSendPinMessageAction")),window.Store.ScheduledEventMsgUtils=u(u(u({},window.require("WAWebGenerateEventCallLink")),window.require("WAWebSendEventEditMsgAction")),window.require("WAWebSendEventResponseMsgAction")),window.Store.VCard=u(u(u({},window.require("WAWebFrontendVcardUtils")),window.require("WAWebVcardParsingUtils")),window.require("WAWebVcardGetNameFromParsed")),window.Store.StickerTools=u(u({},window.require("WAWebImageUtils")),window.require("WAWebAddWebpMetadata")),window.Store.GroupUtils=u(u(u(u(u({},window.require("WAWebGroupCreateJob")),window.require("WAWebGroupModifyInfoJob")),window.require("WAWebExitGroupAction")),window.require("WAWebContactProfilePicThumbBridge")),window.require("WAWebSetPropertyGroupAction")),window.Store.GroupParticipants=u(u({},window.require("WAWebModifyParticipantsGroupAction")),window.require("WASmaxGroupsAddParticipantsRPC")),window.Store.GroupInvite=u(u(u({},window.require("WAWebGroupInviteJob")),window.require("WAWebGroupQueryJob")),window.require("WAWebMexFetchGroupInviteCodeJob")),window.Store.GroupInviteV4=u(u({},window.require("WAWebGroupInviteV4Job")),window.require("WAWebChatSendMessages")),window.Store.MembershipRequestUtils=u(u({},window.require("WAWebApiMembershipApprovalRequestStore")),window.require("WASmaxGroupsMembershipRequestsActionRPC")),window.Store.ChannelUtils=u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u(u({},window.require("WAWebLoadNewsletterPreviewChatAction")),window.require("WAWebNewsletterMetadataQueryJob")),window.require("WAWebNewsletterCreateQueryJob")),window.require("WAWebEditNewsletterMetadataAction")),window.require("WAWebNewsletterDeleteAction")),window.require("WAWebNewsletterSubscribeAction")),window.require("WAWebNewsletterUnsubscribeAction")),window.require("WAWebNewsletterDirectorySearchAction")),window.require("WAWebNewsletterToggleMuteStateJob")),window.require("WAWebNewsletterGatingUtils")),window.require("WAWebNewsletterModelUtils")),window.require("WAWebMexAcceptNewsletterAdminInviteJob")),window.require("WAWebMexRevokeNewsletterAdminInviteJob")),window.require("WAWebChangeNewsletterOwnerAction")),window.require("WAWebDemoteNewsletterAdminAction")),window.require("WAWebNewsletterDemoteAdminJob")),{},{countryCodesIso:window.require("WAWebCountriesNativeCountryNames"),currentRegion:window.require("WAWebL10N").getRegion()}),window.Store.SendChannelMessage=u(u(u(u(u({},window.require("WAWebNewsletterUpdateMsgsRecordsJob")),window.require("WAWebMsgDataFromModel")),window.require("WAWebNewsletterSendMessageJob")),window.require("WAWebNewsletterSendMsgAction")),window.require("WAMediaCalculateFilehash")),window.Store.ChannelSubscribers=u(u({},window.require("WAWebMexFetchNewsletterSubscribersJob")),window.require("WAWebNewsletterSubscriberListAction")),window.Store.AddressbookContactUtils=u(u({},window.require("WAWebSaveContactAction")),window.require("WAWebDeleteContactAction")),window.Store.StatusUtils=u(u(u(u({},window.require("WAWebContactStatusBridge")),window.require("WAWebSendStatusMsgAction")),window.require("WAWebRevokeStatusAction")),window.require("WAWebStatusGatingUtils")),window.Store.Chat._find&&window.Store.Chat.findImpl||(window.Store.Chat._find=function(e){var t=window.Store.Chat.get(e);return t?Promise.resolve(t):Promise.resolve({id:e})},window.Store.Chat.findImpl=window.Store.Chat._find),window.injectToFunction=function(e,t){try{var r=window.require(e.module);if(!r)return;var n,o=e.function.split("."),i=o.pop(),d=a(o);try{for(d.s();!(n=d.n()).done;){var s=n.value;if(!r[s])return;r=r[s]}}catch(c){d.e(c)}finally{d.f()}var u=r[i];if("function"!==typeof u)return;r[i]=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];try{return t.apply(void 0,[u].concat(r))}catch(o){return u.apply(void 0,r)}}}catch(w){return}},window.injectToFunction({module:"WAWebBackendJobsCommon",function:"mediaTypeFromProtobuf"},(function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var o=r[0];return o.locationMessage?null:e.apply(void 0,r)})),window.injectToFunction({module:"WAWebE2EProtoUtils",function:"typeAttributeFromProtobuf"},(function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var o=r[0];return o.locationMessage||o.groupInviteMessage?"text":e.apply(void 0,r)}))):(window.mR=function(){var e={};return e.mID=Math.random().toString(36).substring(7),e.mObj={},(window.webpackChunkbuild||window.webpackChunkwhatsapp_web_client).push([[e.mID],{},function(t){Object.keys(t.m).forEach((function(r){try{e.mObj[r]=t(r)}catch(n){console.warn(n)}}))}]),{modules:e.mObj,constructors:e.cArr,findModule:function(t){var r=[];return Object.keys(e.mObj).forEach((function(n){var o=e.mObj[n];if("undefined"!==typeof o)if("string"===typeof t){if("object"===typeof o.default)for(var i in o.default)i===t&&r.push(o);for(var a in o)a===t&&r.push(o)}else{if("function"!==typeof t)throw new TypeError("findModule can only find via string and function, "+typeof t+" was passed");t(o)&&r.push(o)}})),r},get:function(t){return e.mObj[t]}}}(),window.Store=Object.assign({},window.mR.findModule((function(e){return e.default&&e.default.Chat}))[0].default),window.Store.SendMessage=window.mR.findModule("addAndSendMsgToChat")[0],window.Store.MsgKey=window.mR.findModule((function(e){return e.default&&e.default.fromString}))[0].default,window.Store.DownloadManager=window.mR.findModule("downloadManager")[0].downloadManager,window.Store.User=window.mR.findModule("getMaybeMeUser")[0],window.Store.Validators=window.mR.findModule("findLinks")[0],window.Store.WidFactory=window.mR.findModule("createWid")[0],window.Store.SendSeen=window.mR.findModule("sendSeen")[0],window.Store.QueryExist=window.mR.findModule("queryExists")[0]?window.mR.findModule("queryExists")[0].queryExists:window.mR.findModule("queryExist")[0].queryWidExists,window.Store.MediaUpload=window.mR.findModule("uploadMedia")[0],window.Store.MediaTypes=window.mR.findModule("msgToMediaType")[0],window.Store.MediaObject=window.mR.findModule("getOrCreateMediaObject")[0],window.Store.MediaPrep=window.mR.findModule("prepRawMedia")[0],window.Store.OpaqueData=window.mR.findModule((function(e){return e.default&&e.default.createFromData}))[0].default,window.Store.Chat._find||(window.Store.Chat._find=function(e){var t=window.Store.Chat.get(e);return t?Promise.resolve(t):Promise.resolve({id:e})}),window.mR.findModule("ChatCollection")[0]&&window.mR.findModule("ChatCollection")[0].ChatCollection&&"undefined"===typeof window.mR.findModule("ChatCollection")[0].ChatCollection.findImpl&&"undefined"!=typeof window.mR.findModule("ChatCollection")[0].ChatCollection._find&&(window.mR.findModule("ChatCollection")[0].ChatCollection.findImpl=window.mR.findModule("ChatCollection")[0].ChatCollection._find)),window.WWebJS={},window.WWebJS.mediaInfoToFile=function(e){for(var t=e.data,r=e.mimetype,n=e.filename,o=window.atob(t),i=new ArrayBuffer(o.length),a=new Uint8Array(i),d=0;d<o.length;d++)a[d]=o.charCodeAt(d);var s=new Blob([i],{type:r});return new File([s],n,{type:r,lastModified:Date.now()})},window.WWebJS.processMediaData=function(){var e=i(A().mark((function e(t,r){var n,o,i,a,d,s,c,w,l,f,p,b,h,m,y,v,g;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.forceSticker,o=r.forceGif,i=r.forceVoice,a=r.forceDocument,d=r.forceMediaHd,s=r.sendToChannel,c=window.WWebJS.mediaInfoToFile(t),e.next=4,window.Store.OpaqueData.createFromData(c,c.type);case 4:return w=e.sent,l={asSticker:n,asGif:o,isPtt:i,asDocument:a},d&&0===c.type.indexOf("image/")&&(l.maxDimension=2560),f=window.Store.MediaPrep.prepRawMedia(w,l),e.next=10,f.waitForPrep();case 10:if(p=e.sent,b=window.Store.MediaObject.getOrCreateMediaObject(p.filehash),h=window.Store.MediaTypes.msgToMediaType({type:p.type,isGif:p.isGif,isNewsletter:s}),!i||"ptt"!==p.type){e.next=21;break}if(m=b.contentInfo.waveform,e.t0=m,e.t0){e.next=20;break}return e.next=19,window.WWebJS.generateWaveform(c);case 19:e.t0=e.sent;case 20:p.waveform=e.t0;case 21:if(p.mediaBlob instanceof window.Store.OpaqueData){e.next=25;break}return e.next=24,window.Store.OpaqueData.createFromData(p.mediaBlob,p.mediaBlob.type);case 24:p.mediaBlob=e.sent;case 25:if(p.renderableUrl=p.mediaBlob.url(),b.consolidate(p.toJSON()),p.mediaBlob.autorelease(),y=u({mimetype:p.mimetype,mediaObject:b,mediaType:h},s?{calculateToken:window.Store.SendChannelMessage.getRandomFilehash}:{}),s){e.next=35;break}return e.next=32,window.Store.MediaUpload.uploadMedia(y);case 32:e.t1=e.sent,e.next=38;break;case 35:return e.next=37,window.Store.MediaUpload.uploadUnencryptedMedia(y);case 37:e.t1=e.sent;case 38:if(v=e.t1,g=v.mediaEntry){e.next=42;break}throw new Error("upload failed: media entry was not created");case 42:return p.set({clientUrl:g.mmsUrl,deprecatedMms3Url:g.deprecatedMms3Url,directPath:g.directPath,mediaKey:g.mediaKey,mediaKeyTimestamp:g.mediaKeyTimestamp,filehash:b.filehash,encFilehash:g.encFilehash,uploadhash:g.uploadHash,size:b.size,streamingSidecar:g.sidecar,firstFrameSidecar:g.firstFrameSidecar,mediaHandle:s?g.handle:null}),e.abrupt("return",p);case 44:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),window.WWebJS.arrayBufferToBase64Async=function(e){return new Promise((function(t,r){var o=new Blob([e],{type:"application/octet-stream"}),i=new FileReader;i.onload=function(){var e=n(i.result.split(","),2)[1];t(e)},i.onerror=function(e){return r(e)},i.readAsDataURL(o)}))},window.WWebJS.getMessageModel=function(e){var t=e.serialize();return t.isEphemeral=e.isEphemeral,t.isStatusV3=e.isStatusV3,t.links=window.Store.Validators.findLinks(e.mediaObject?e.caption:e.body).map((function(e){return{link:e.href,isSuspicious:Boolean(e.suspiciousCharacters&&e.suspiciousCharacters.size)}})),t.buttons&&(t.buttons=t.buttons.serialize()),t.dynamicReplyButtons&&(t.dynamicReplyButtons=JSON.parse(JSON.stringify(t.dynamicReplyButtons))),t.replyButtons&&(t.replyButtons=JSON.parse(JSON.stringify(t.replyButtons))),"object"===typeof t.id.remote&&(t.id=Object.assign({},t.id,{remote:t.id.remote._serialized})),delete t.pendingAckUpdate,t},window.WWebJS.getChat=function(){var e=i(A().mark((function e(t){var r,n,o,i,a,d,s,u=arguments;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>1&&void 0!==u[1]?u[1]:{},n=r.getAsModel,o=void 0===n||n,i=/@\w*newsletter\b/.test(t),a=window.Store.WidFactory.createWid(t),!i){e.next=19;break}if(e.prev=4,d=window.Store.NewsletterCollection.get(t)){e.next=12;break}return e.next=9,window.Store.ChannelUtils.loadNewsletterPreviewChat(t);case 9:return e.next=11,window.Store.NewsletterCollection.find(a);case 11:d=e.sent;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),d=null;case 17:e.next=34;break;case 19:if(e.t1=window.Store.Chat.get(a),e.t1){e.next=33;break}return e.next=23,window.Store.FindOrCreateChat.findOrCreateLatestChat(a);case 23:if(e.t3=s=e.sent,e.t2=null===e.t3,e.t2){e.next=27;break}e.t2=void 0===s;case 27:if(!e.t2){e.next=31;break}e.t4=void 0,e.next=32;break;case 31:e.t4=s.chat;case 32:e.t1=e.t4;case 33:d=e.t1;case 34:if(!o||!d){e.next=40;break}return e.next=37,window.WWebJS.getChatModel(d,{isChannel:i});case 37:e.t5=e.sent,e.next=41;break;case 40:e.t5=d;case 41:return e.abrupt("return",e.t5);case 42:case"end":return e.stop()}}),e,null,[[4,14]])})));return function(t){return e.apply(this,arguments)}}(),window.WWebJS.sendSeen=function(){var e=i(A().mark((function e(t){var r,n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,window.WWebJS.getChat(t,{getAsModel:!1});case 3:if(!(r=e.sent)){e.next=10;break}return window.Store.WAWebStreamModel.Stream.markAvailable(),e.next=8,window.Store.SendSeen.sendSeen(r);case 8:return window.Store.WAWebStreamModel.Stream.markUnavailable(),e.abrupt("return",!0);case 10:return e.abrupt("return",!1);case 13:if(e.prev=13,e.t0=e.catch(0),null===e.t0||void 0===e.t0||null===(n=e.t0.message)||void 0===n||!n.includes("markedUnread")){e.next=17;break}return e.abrupt("return",!0);case 17:throw e.t0;case 18:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),window.WWebJS.sendMessage=function(){var e=i(A().mark((function e(t,r){var o,a,d,s,c,w,l,f,p,b,h,m,y,v,g,S,W,M,C,x,k,q,O,P,N,U,E,R,T,J,B,L,j,I,F,G,D,_,V,z,K,Q,H,$,Y,X,Z,ee,te,re,ne,oe,ie,ae,de,se,ue=arguments;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=ue.length>2&&void 0!==ue[2]?ue[2]:{},d=window.Store.ChatGetters.getIsNewsletter(t),s={},!a.media){e.next=19;break}if(!a.sendMediaAsSticker||d){e.next=10;break}return e.next=7,window.WWebJS.processStickerData(a.media);case 7:e.t0=e.sent,e.next=13;break;case 10:return e.next=12,window.WWebJS.processMediaData(a.media,{forceSticker:a.sendMediaAsSticker,forceGif:a.sendVideoAsGif,forceVoice:a.sendAudioAsVoice,forceDocument:a.sendMediaAsDocument,forceMediaHd:a.sendMediaAsHd,sendToChannel:d});case 12:e.t0=e.sent;case 13:(s=e.t0).caption=a.caption,r=a.sendMediaAsSticker?void 0:s.preview,s.isViewOnce=a.isViewOnce,delete a.media,delete a.sendMediaAsSticker;case 19:if(c={},!a.quotedMessageId){e.next=45;break}if(f=window.Store.Msg.get(a.quotedMessageId),e.t1=!f,!e.t1){e.next=36;break}return e.next=26,window.Store.Msg.getMessagesById([a.quotedMessageId]);case 26:if(e.t3=w=e.sent,e.t2=null===e.t3,e.t2){e.next=30;break}e.t2=void 0===w;case 30:if(!e.t2){e.next=34;break}e.t4=void 0,e.next=35;break;case 34:e.t4=null===(l=w.messages)||void 0===l?void 0:l[0];case 35:f=e.t4;case 36:if(!f){e.next=41;break}(window.Store.ReplyUtils?window.Store.ReplyUtils.canReplyMsg(f.unsafe()):f.canReply())&&(c=f.msgContextInfo(t)),e.next=43;break;case 41:if(a.ignoreQuoteErrors){e.next=43;break}throw new Error("Could not get the quoted message.");case 43:delete a.ignoreQuoteErrors,delete a.quotedMessageId;case 45:if(!a.mentionedJidList){e.next=50;break}return e.next=48,Promise.all(a.mentionedJidList.map(function(){var e=i(A().mark((function e(t){var r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=window.Store.WidFactory.createWid(t),e.next=3,window.Store.QueryExist(r);case 3:if(!e.sent){e.next=5;break}return e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 48:a.mentionedJidList=e.sent,a.mentionedJidList=a.mentionedJidList.filter(Boolean);case 50:if(a.groupMentions&&(a.groupMentions=a.groupMentions.map((function(e){return{groupSubject:e.subject,groupJid:window.Store.WidFactory.createWid(e.id)}}))),p={},a.location&&(h=a.location,m=h.latitude,y=h.longitude,v=h.description,g=h.url,(g=null===(b=window.Store.Validators.findLink(g))||void 0===b?void 0:b.href)&&!v&&(v=g),p={type:"location",loc:v,lat:m,lng:y,clientUrl:g},delete a.location),S={},a.poll&&(W=a.poll,M=W.pollName,C=W.pollOptions,x=a.poll.options,k=x.allowMultipleAnswers,q=x.messageSecret,S={kind:"pollCreation",type:"poll_creation",pollName:M,pollOptions:C,pollSelectableOptionsCount:k?0:1,messageSecret:Array.isArray(q)&&32===q.length?new Uint8Array(q):window.crypto.getRandomValues(new Uint8Array(32))},delete a.poll),O={},!a.event){e.next=71;break}return P=a.event,N=P.name,U=P.startTimeTs,E=P.eventSendOptions,R=E.messageSecret,e.t5=N,e.t6=E.description,e.t7=U,e.t8=E.endTimeTs,e.t9=E.location&&{degreesLatitude:0,degreesLongitude:0,name:E.location},e.next=66,window.Store.ScheduledEventMsgUtils.createEventCallLink(U,E.callType);case 66:e.t10=e.sent,e.t11=E.isEventCanceled,e.t12=Array.isArray(R)&&32===R.length?new Uint8Array(R):window.crypto.getRandomValues(new Uint8Array(32)),O={type:"event_creation",eventName:e.t5,eventDescription:e.t6,eventStartTime:e.t7,eventEndTime:e.t8,eventLocation:e.t9,eventJoinLink:e.t10,isEventCanceled:e.t11,messageSecret:e.t12},delete a.event;case 71:if(T={},a.contactCard)J=window.Store.Contact.get(a.contactCard),T={body:window.Store.VCard.vcardFromContactModel(J).vcard,type:"vcard",vcardFormattedName:J.formattedName},delete a.contactCard;else if(a.contactCardList)B=a.contactCardList.map((function(e){return window.Store.Contact.get(e)})),L=B.map((function(e){return window.Store.VCard.vcardFromContactModel(e)})),T={type:"multi_vcard",vcardList:L,body:null},delete a.contactCardList;else if(a.parseVCards&&"string"===typeof r&&r.startsWith("BEGIN:VCARD")){delete a.parseVCards,delete a.linkPreview;try{(j=window.Store.VCard.parseVcard(r))&&(T={type:"vcard",vcardFormattedName:window.Store.VCard.vcardGetNameFromParsed(j)})}catch(ce){}}if(!a.linkPreview){e.next=81;break}if(delete a.linkPreview,!(I=window.Store.Validators.findLink(r))){e.next=81;break}return e.next=79,window.Store.LinkPreview.getLinkPreview(I);case 79:(F=e.sent)&&F.data&&((F=F.data).preview=!0,F.subtype="url",a=u(u({},a),F));case 81:if(G={},a.buttons&&("chat"===a.buttons.type?(r=a.buttons.body,D=r):D=a.caption?a.caption:" ",G={productHeaderImageRejected:!1,isFromTemplate:!1,isDynamicReplyButtonsMsg:!0,title:a.buttons.title?a.buttons.title:void 0,footer:a.buttons.footer?a.buttons.footer:void 0,dynamicReplyButtons:a.buttons.buttons,replyButtons:a.buttons.buttons,caption:D},delete a.buttons),_={},!a.list){e.next=90;break}if("smba"!==window.Store.Conn.platform&&"smbi"!==window.Store.Conn.platform){e.next=87;break}throw"[LT01] Whatsapp business can't send this yet";case 87:_={type:"list",footer:a.list.footer,list:u(u({},a.list),{},{listType:1}),body:a.list.description},delete a.list,delete _.list.footer;case 90:if(V={},!a.invokedBotWid){e.next=99;break}return V.messageSecret=window.crypto.getRandomValues(new Uint8Array(32)),e.next=95,window.Store.BotSecret.genBotMsgSecretFromMsgSecret(V.messageSecret);case 95:V.botMessageSecret=e.sent,V.invokedBotWid=window.Store.WidFactory.createWid(a.invokedBotWid),V.botPersonaId=window.Store.BotProfiles.BotProfileCollection.get(a.invokedBotWid).personaId,delete a.invokedBotWid;case 99:return z=window.Store.User.getMaybeMeLidUser(),K=window.Store.User.getMaybeMePnUser(),e.next=103,window.Store.MsgKey.newId();case 103:if(Q=e.sent,H=t.id.isLid()?z:K,"function"===typeof(null===(o=t.id)||void 0===o?void 0:o.isGroup)&&t.id.isGroup()&&(H=t.groupMetadata&&t.groupMetadata.isLidAddressingMode?z:K,$=window.Store.WidFactory.asUserWidOrThrow(H)),Y=new window.Store.MsgKey({from:H,to:t.id,id:Q,participant:$,selfDir:"out"}),X=a.extraOptions||{},delete a.extraOptions,Z=window.Store.EphemeralFields.getEphemeralFields(t),ee=u(u(u(u(u(u(u(u(u(u(u(u(u({},a),{},{id:Y,ack:0,body:r,from:K,to:t.id,local:!0,self:"out",t:parseInt((new Date).getTime()/1e3),isNewMsg:!0,type:"chat"},Z),s),s.toJSON?s.toJSON():{}),c),p),S),O),T),G),_),V),X),V&&delete ee.canonicalUrl,!d){e.next=128;break}return te=new window.Store.Msg.modelClass(ee),re=window.Store.SendChannelMessage.msgDataFromMsgModel(te),ne=Object.keys(s).length>0,e.next=118,window.Store.SendChannelMessage.addNewsletterMsgsRecords([re]);case 118:return t.msgs.add(te),t.t=te.t,e.next=122,window.Store.SendChannelMessage.sendNewsletterMessageJob(u({msg:te,type:"chat"===ee.type?"text":ne?"media":"pollCreation",newsletterJid:t.id.toJid()},ne?{mediaMetadata:te.avParams(),mediaHandle:ne?s.mediaHandle:null}:{}));case 122:return(oe=e.sent).success&&(te.t=oe.ack.t,te.serverId=oe.serverId),te.updateAck(1,!0),e.next=127,window.Store.SendChannelMessage.updateNewsletterMsgRecord(te);case 127:return e.abrupt("return",te);case 128:return ie=window.Store.SendMessage.addAndSendMsgToChat(t,ee),ae=n(ie,2),de=ae[0],se=ae[1],e.next=131,de;case 131:if(!a.waitUntilMsgSent){e.next=134;break}return e.next=134,se;case 134:return e.abrupt("return",window.Store.Msg.get(Y._serialized));case 135:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),window.Store.Msg.on("add",function(){var e=i(A().mark((function e(t){var r,n,o,a,d;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t.isNewMsg||t.id.fromMe||t.author||"newsletter"===(null===(r=t.from)||void 0===r?void 0:r.server)){e.next=18;break}if("ciphertext"!==t.type){e.next=6;break}t.once("change:type",function(){var e=i(A().mark((function e(t){var r,n,o;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.WWebJS.getMessageModel(t),e.next=3,window.WWebJS.getContact(n.from);case 3:o=e.sent,n.phoneNumberId=null===(r=o.id)||void 0===r?void 0:r._serialized,n.contactName=o.name,window.postMessage({type:C,data:n});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=18;break;case 6:return o=window.WWebJS.getMessageModel(t),e.next=9,window.WWebJS.getContact(o.from);case 9:if(a=e.sent,o.phoneNumberId=null===(n=a.id)||void 0===n?void 0:n._serialized,o.contactName=a.name,d="",!Boolean(o.mediaKey&&o.directPath)){e.next=17;break}return e.next=16,E(o);case 16:d=e.sent;case 17:window.postMessage({type:C,data:o,mediaData:d});case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),console.error("Msg add event error:",e.t0);case 23:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(t){return e.apply(this,arguments)}}()),setInterval(i(A().mark((function e(){var t,r,n,o,i,a,d,s,u;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!document.hidden){e.next=2;break}return e.abrupt("return");case 2:if(e.prev=2,r=window.Store.Chat.getModelsArray(),(n=r.find((function(e){return e.active})))||null===N||(N=null,window.postMessage({type:q,data:null})),!n||N===(null===n||void 0===n||null===(t=n.id)||void 0===t?void 0:t._serialized)){e.next=14;break}return d=null===n||void 0===n||null===(o=n.id)||void 0===o?void 0:o._serialized,e.next=10,window.WWebJS.getContact(d);case 10:s=e.sent,N=null===n||void 0===n||null===(i=n.id)||void 0===i?void 0:i._serialized,u={id:null===(a=s.id)||void 0===a?void 0:a._serialized,isGroup:null===s||void 0===s?void 0:s.isGroup,isMe:null===s||void 0===s?void 0:s.isMe,formattedTitle:n.formattedTitle||s.name||s.formattedTitle,name:(null===s||void 0===s?void 0:s.pushname)||(null===s||void 0===s?void 0:s.verifiedName)||(null===s||void 0===s?void 0:s.displayName)},window.postMessage({type:q,data:u});case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(2),console.error("updateActiveChat",e.t0);case 19:case"end":return e.stop()}}),e,null,[[2,16]])}))),800),window.WWebJS.getChatModel=function(){var e=i(A().mark((function e(t){var r,n,o,i,a,d,s,u,c,w=arguments;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=w.length>1&&void 0!==w[1]?w[1]:{},o=n.isChannel,i=void 0!==o&&o,t){e.next=3;break}return e.abrupt("return",null);case 3:if((a=t.serialize()).isGroup=!1,a.isMuted=0!==(null===(r=t.mute)||void 0===r?void 0:r.expiration),i?a.isChannel=window.Store.ChatGetters.getIsNewsletter(t):a.formattedTitle=t.formattedTitle,!t.groupMetadata){e.next=15;break}return a.isGroup=!0,d=window.Store.WidFactory.createWid(t.id._serialized),e.next=12,window.Store.GroupMetadata.update(d);case 12:t.groupMetadata.participants._models.filter((function(e){var t,r;return null===(t=e.id)||void 0===t||null===(r=t._serialized)||void 0===r?void 0:r.endsWith("@lid")})).forEach((function(e){var t;return(null===(t=e.contact)||void 0===t?void 0:t.phoneNumber)&&(e.id=e.contact.phoneNumber)})),a.groupMetadata=t.groupMetadata.serialize(),a.isReadOnly=t.groupMetadata.announce;case 15:if(!t.newsletterMetadata){e.next=20;break}return e.next=18,window.Store.NewsletterMetadataCollection.update(t.id);case 18:a.channelMetadata=t.newsletterMetadata.serialize(),a.channelMetadata.createdAtTs=t.newsletterMetadata.creationTime;case 20:if(a.lastMessage=null,!a.msgs||!a.msgs.length){e.next=43;break}if(!t.lastReceivedKey){e.next=40;break}if(e.t1=window.Store.Msg.get(t.lastReceivedKey._serialized),e.t1){e.next=37;break}return e.next=27,window.Store.Msg.getMessagesById([t.lastReceivedKey._serialized]);case 27:if(e.t3=s=e.sent,e.t2=null===e.t3,e.t2){e.next=31;break}e.t2=void 0===s;case 31:if(!e.t2){e.next=35;break}e.t4=void 0,e.next=36;break;case 35:e.t4=null===(u=s.messages)||void 0===u?void 0:u[0];case 36:e.t1=e.t4;case 37:e.t0=e.t1,e.next=41;break;case 40:e.t0=null;case 41:(c=e.t0)&&(a.lastMessage=window.WWebJS.getMessageModel(c));case 43:return delete a.msgs,delete a.msgUnsyncedButtonReplyMsgs,delete a.unsyncedButtonReplies,e.abrupt("return",a);case 47:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),window.WWebJS.getChats=i(A().mark((function e(){var t,r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.Store.Chat.getModelsArray(),r=t.map((function(e){return window.WWebJS.getChatModel(e)})),e.next=4,Promise.all(r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)}))),window.WWebJS.getContactModel=function(e){var t=e.serialize();return t.isBusiness=void 0!==e.isBusiness&&e.isBusiness,e.businessProfile&&(t.businessProfile=e.businessProfile.serialize()),t.isMe=window.Store.ContactMethods.getIsMe(e),t.isUser=window.Store.ContactMethods.getIsUser(e),t.isGroup=window.Store.ContactMethods.getIsGroup(e),t.isWAContact=window.Store.ContactMethods.getIsWAContact(e),t.isMyContact=window.Store.ContactMethods.getIsMyContact(e),t.isBlocked=e.isContactBlocked,t.userid=window.Store.ContactMethods.getUserid(e),t.isEnterprise=window.Store.ContactMethods.getIsEnterprise(e),t.verifiedName=window.Store.ContactMethods.getVerifiedName(e),t.verifiedLevel=window.Store.ContactMethods.getVerifiedLevel(e),t.statusMute=window.Store.ContactMethods.getStatusMute(e),t.name=window.Store.ContactMethods.getName(e),t.shortName=window.Store.ContactMethods.getShortName(e),t.pushname=window.Store.ContactMethods.getPushname(e),t},window.WWebJS.getContact=function(){var e=i(A().mark((function e(t){var r,n,o;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=window.Store.WidFactory.createWid(t),e.next=3,window.Store.Contact.find(r);case 3:return(n=e.sent).id._serialized.endsWith("@lid")&&(n.id=n.phoneNumber),e.next=7,window.Store.BusinessProfile.fetchBizProfile(r);case 7:return(o=e.sent).profileOptions&&(n.businessProfile=o),e.abrupt("return",window.WWebJS.getContactModel(n));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var F=function(){var e=i(A().mark((function e(t,r){var n,o,i,a=arguments;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>2&&void 0!==a[2]?a[2]:{},e.next=3,window.WWebJS.getChat(t,{getAsModel:!1});case 3:if(o=e.sent){e.next=6;break}return e.abrupt("return",null);case 6:return e.next=8,window.WWebJS.sendSeen(t);case 8:return e.next=10,window.WWebJS.sendMessage(o,r,n);case 10:return i=e.sent,e.abrupt("return",i?window.WWebJS.getMessageModel(i):void 0);case 12:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();window.addEventListener("message",function(){var e=i(A().mark((function e(t){var r,n,o,i,a,d;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("https://web.whatsapp.com"===t.origin||t.source===window){e.next=2;break}return e.abrupt("return");case 2:if(e.prev=2,(null===(r=t.data)||void 0===r?void 0:r.type)!==x){e.next=9;break}return i=t.data.data,e.next=7,F(i.from,i.response);case 7:e.next=22;break;case 9:if((null===(n=t.data)||void 0===n?void 0:n.type)!==k){e.next=19;break}return a=t.data.data,e.next=13,T(a.from);case 13:if(null===(d=e.sent)||void 0===d||!d._serialized){e.next=17;break}return e.next=17,F(null===d||void 0===d?void 0:d._serialized,a.response);case 17:e.next=22;break;case 19:if((null===(o=t.data)||void 0===o?void 0:o.type)!==O){e.next=22;break}return e.next=22,j();case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(2),console.error("messageEventListener",e.t0);case 27:case"end":return e.stop()}}),e,null,[[2,24]])})));return function(t){return e.apply(this,arguments)}}())}()}();